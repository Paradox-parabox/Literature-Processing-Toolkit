---
name: PICOS-screener
description: 基于PICOS标准的文献筛选Agent。执行两阶段筛选流程（标题摘要筛选+全文筛选），生成筛选结果CSV和PRISMA流程图。适用于：(1) 对scholar-crawler爬取的论文进行筛选 (2) 根据PICOS-catcher生成的标准执行筛选 (3) 生成符合PRISMA规范的筛选报告。当用户需要对大量论文进行筛选、需要执行PICOS标准、或需要生成PRISMA流程图时使用。
---

# PICOS-screener

基于PICOS标准的两阶段文献筛选Agent。

## 工作流程

```
输入文件 → 去重处理 → 加载PICOS标准 → 第一阶段筛选 → 第二阶段筛选 → 依据映射 → 输出报告
```

---

## 第一步：输入验证与去重

### 1.1 必需文件

| 文件 | 说明 | 格式 |
|------|------|------|
| **论文列表** | 待筛选的论文数据 | CSV（含title字段） |
| **PICOS标准** | 筛选依据 | Markdown（PICOS-catcher生成或手动编写） |

### 1.2 CSV字段要求

```
必需字段：title
推荐字段：abstract, authors, year, journal, doi, url, citation_count
特殊字段：Directive_Type, Seed_Paper（scholar-crawler生成）
引用格式字段：DOI, Volume, Issue, Pages, Citation_GB（scholar-crawler生成）
来源字段：Source, Link（scholar-crawler生成）
```

**重要**：在筛选过程中，必须保留所有原始字段，特别是用于生成引用格式的字段。

### 1.3 去重处理

**重要性**：论文列表可能包含重复记录，必须先去重再筛选。

**去重策略**：

```
去重步骤：
1. 提取标题字段，转换为小写
2. 去除首尾空白字符
3. 按标题去重，保留第一条记录
4. 记录去重前后的数量差异

输出：
- 原始论文数：N篇
- 去重后论文数：M篇
- 去除重复：N-M篇
```

---

## 第二步：加载PICOS标准

### 2.1 动态提取PICOS要素

**关键**：不预设具体关键词，从PICOS标准文件中动态提取：

| 要素 | 提取内容 | 用途 |
|------|---------|------|
| **P** | 问题域描述、应用背景 | 判断研究问题相关性 |
| **I** | 核心方法、关键词 | 判断方法相关性 |
| **C** | 对比参照方法 | 识别排除目标 |
| **O** | 期望产出 | 辅助判断 |
| **S** | 研究范式 | 判断研究类型 |
| **纳入标准** | 必须满足的条件 | 纳入检查清单 |
| **排除标准** | 排除条件 | 排除检查清单 |
| **歧义词** | 同词异义警示 | 避免误判 |

### 2.2 构建关键词-正文依据映射

**目的**：为每个关键词建立到正文原文的映射，用于报告生成。

**提取方法**：

```
从PICOS标准文件中提取：
1. I要素中的核心方法关键词及其正文依据
2. P要素中的问题域关键词及其正文依据
3. 其他要素的关键词及依据

映射格式：
{
  "关键词": "正文原文依据"
}

示例：
{
  "Lattice Boltzmann": "格子Boltzmann方法具有许多独特的优点：清晰的物理背景、天然的并行性",
  "porous media": "多相流在非均匀多孔介质中的输运过程"
}
```

---

## 第三步：第一阶段筛选（标题+摘要）

### 3.1 筛选策略

**目标**：快速识别明显相关或明显不相关的论文

### 3.2 处理流程

```
对于每篇论文：

Step 1: 提取PICOS关键词
  - 从I要素提取核心方法关键词
  - 从C要素提取对比参照关键词
  - 从P要素提取问题域关键词

Step 2: 标题检查
  - 标题包含I要素关键词？ → 可能纳入
  - 标题包含C要素关键词？ → 可能排除
  - 标题无关键词？ → 继续检查摘要

Step 3: 摘要检查
  - 摘要第一句：研究目的是什么？
  - 摘要中间：采用什么方法？
  - 摘要最后：得出什么结论？

Step 4: 记录匹配信息
  - 记录匹配的关键词列表
  - 记录匹配类型（关键词匹配/SEED关联）
  - 提取摘要中包含关键词的句子

Step 5: 给出判断
  ├── 纳入 → 进入第二阶段
  ├── 排除 → 记录排除原因
  └── 不确定 → 进入第二阶段（待定）
```

### 3.3 匹配类型识别

**区分关键词匹配和SEED关联**：

```
检查CSV中的Directive_Type字段：
├── "SEED" → SEED关联
│   └── 显示关联的种子论文（Seed_Paper字段）
└── "QUERY" 或其他 → 关键词匹配
    └── 显示匹配的关键词列表
```

### 3.4 排除原因分类

| 代码 | 原因 | 判断依据 |
|------|------|---------|
| **E1** | 研究问题不相关 | 不匹配P要素 |
| **E2** | 研究方法不相关 | 不匹配I要素 |
| **E3** | 属于对比参照方法 | 匹配C要素 |
| **E4** | 研究类型不符 | 不匹配S要素 |
| **E5** | 其他原因 | 需具体说明 |

---

## 第四步：第二阶段筛选（全文）

### 4.1 适用对象

- 第一阶段"纳入"的论文
- 第一阶段"待定"的论文

### 4.2 详细判断

```
对于每篇论文：

Step 1: 验证研究问题
  - 是否匹配P要素定义的问题域？
  - 是否涉及PICOS指定的应用背景？

Step 2: 验证研究方法
  - 是否采用I要素定义的核心方法？
  - 方法创新点是什么？

Step 3: 检查排除条件
  - 是否属于C要素定义的对比参照？
  - 是否满足排除标准？

Step 4: 最终判断
  ├── 纳入 → 进行质量评分
  └── 排除 → 记录详细排除原因
```

### 4.3 质量评分

```
对纳入论文进行质量评分：
- 方法创新性：1-5分
- 相关性程度：1-5分
- 引用数权重：1-5分（如有数据）

综合评分 = (创新性 + 相关性 + 引用数) / 3

优先级划分：
- 高优先级：综合评分 ≥ 4
- 中优先级：综合评分 3-3.9
- 低优先级：综合评分 < 3
```

---

## 第五步：依据映射与提取

### 5.1 正文依据映射

**目的**：显示论文与立项依据的相关性

**方法**：

```
对于每篇纳入论文：
1. 获取其匹配的关键词列表
2. 从关键词-正文映射中查找对应的正文依据
3. 输出正文原文

示例：
论文匹配关键词：Lattice Boltzmann, porous media
正文依据：
  - "格子Boltzmann方法具有许多独特的优点：清晰的物理背景、天然的并行性"
  - "多相流在非均匀多孔介质中的输运过程"
```

### 5.2 摘要依据提取

**目的**：快速了解论文具体贡献

**方法**：

```
对于每篇纳入论文：
1. 获取其摘要文本
2. 按句子分割（句号、问号、感叹号）
3. 遍历每个句子，检查是否包含匹配关键词
4. 提取包含关键词的句子（最多2-3句）
5. 如句子过长，截断至200字符

示例：
论文标题：Lattice Boltzmann modeling of reactive transport in porous media
摘要依据："Lattice Boltzmann method has been widely used for simulating fluid flow in porous media."
```

---

## 第六步：生成输出文件

### 6.1 输出文件列表

| 文件 | 说明 |
|------|------|
| screening_results.csv | 完整筛选结果（包含所有论文及筛选状态） |
| included_papers.csv | 纳入论文清单（包含完整元数据和引用格式） |
| screening_report.md | 筛选报告 |

### 6.1.1 included_papers.csv 字段说明

```
必需输出字段：
- 序号：论文编号
- 论文标题：论文标题
- 匹配类型：关键词匹配/SEED关联
- 匹配依据：匹配的关键词或种子论文
- 正文依据（立项依据）：PICOS标准中对应的原文
- 摘要依据（论文贡献）：论文摘要中包含关键词的句子
- 质量评分：综合评分（1-5）
- 优先级：高/中/低
- 引用格式：GB/T 7714标准引用格式
- 来源：数据来源（Semantic Scholar/Google Scholar）
- 链接：论文链接

保留的原始字段（如有）：
- Authors, Year, Venue, DOI, Citations等
```

### 6.2 筛选报告格式

**两表格格式**：

```
表一：纳入论文清单（按优先级排序，仅显示中高优先级）
- 高优先级论文
- 中优先级论文
（低优先级论文不纳入最终表格，但仍计入PRISMA统计）

每篇论文包含：
| 序号 | 论文标题 | 匹配类型 | 匹配依据 | 正文依据 | 摘要依据 | 引用格式 | 来源 | 链接 |

表二：排除论文统计
| 排除原因 | 数量 | 说明 |
```

**输出字段说明**：

| 字段 | 说明 | 来源 |
|------|------|------|
| 序号 | 论文编号 | 自动生成 |
| 论文标题 | 论文标题 | 原始CSV |
| 匹配类型 | 关键词匹配/SEED关联 | 筛选判断 |
| 匹配依据 | 匹配的关键词或种子论文 | 筛选判断 |
| 正文依据 | PICOS标准中对应的原文 | PICOS映射 |
| 摘要依据 | 论文摘要中包含关键词的句子 | 论文摘要 |
| **引用格式** | GB/T 7714标准引用格式 | 原始CSV的Citation_GB字段 |
| **来源** | 数据来源（Semantic Scholar/Google Scholar） | 原始CSV的Source字段 |
| **链接** | 论文链接 | 原始CSV的Link字段 |

详细模板见 [assets/report_template.md](assets/report_template.md)

### 6.3 PRISMA流程图数据

```
记录数据：
- 原始论文数
- 去重后论文数
- 去除重复数
- 第一阶段排除数量（按原因分类）
- 第二阶段排除数量（按原因分类）
- 最终纳入数量
```

---

## 第七步：生成PRISMA流程图

### PRISMA 2020 标准格式

```
┌─────────────────────────────────────────────────────────┐
│                    PRISMA 2020 Flow Diagram              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────┐                                │
│  │ 数据库检索 (N=XX)    │                                │
│  └──────────┬──────────┘                                │
│             │                                           │
│             ▼                                           │
│  ┌─────────────────────┐                                │
│  │ 去重后 (N=XX)        │                                │
│  └──────────┬──────────┘                                │
│             │                                           │
│             ▼                                           │
│  ┌─────────────────────┐    ┌──────────────────────┐   │
│  │ 标题摘要筛选        │───→│ 排除 (N=XX)          │   │
│  │ (N=XX)              │    │ - E1: XX篇           │   │
│  └──────────┬──────────┘    │ - E2: XX篇           │   │
│             │               │ - E3: XX篇           │   │
│             ▼               └──────────────────────┘   │
│  ┌─────────────────────┐                                │
│  │ 全文筛选 (N=XX)      │                                │
│  └──────────┬──────────┘                                │
│             │                                           │
│             ├──────────────────────────────┐            │
│             │                              │            │
│             ▼                              ▼            │
│  ┌─────────────────────┐    ┌──────────────────────┐   │
│  │ 最终纳入 (N=XX)      │    │ 排除 (N=XX)          │   │
│  │                     │    └──────────────────────┘   │
│  │ 高优先级: XX篇       │                              │
│  │ 中优先级: XX篇       │                              │
│  │ 低优先级: XX篇*      │                              │
│  │ *低优先级不计入最终表格│                              │
│  └─────────────────────┘                              │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 筛选指南

详细的筛选判断指南见 [references/screening_guide.md](references/screening_guide.md)

---

## 使用示例

```
用户：帮我筛选这些论文，根据PICOS_criteria.md标准

Agent：
1. 读取论文CSV文件
2. 执行去重处理
   - 原始：463篇
   - 去重后：364篇（去除99篇重复）
3. 加载PICOS标准，提取关键词和正文依据映射
4. 执行第一阶段筛选（标题+摘要）
   - 纳入：XX篇
   - 排除：XX篇
   - 待定：XX篇
5. 执行第二阶段筛选（全文）
   - 最终纳入：XX篇
   - 排除：XX篇
6. 执行依据映射
   - 正文依据映射
   - 摘要依据提取
7. 生成输出文件：
   - screening_results.csv
   - included_papers.csv
   - screening_report.md
```

---

## 注意事项

### 筛选原则

1. **严格遵循PICOS标准**：所有判断必须基于PICOS标准文件
2. **宁可纳入，不可遗漏**：不确定的论文进入下一阶段
3. **记录原因**：每篇排除论文必须有明确原因
4. **保持一致**：同一标准贯穿始终

### 效率优化

1. 先去重再筛选，避免重复处理
2. 第一阶段快速筛选，不纠结细节
3. 第二阶段详细分析，确保质量

### 质量保证

1. 对纳入论文进行质量评分
2. 提供正文依据和摘要依据，便于人工复核
3. 区分关键词匹配和SEED关联，追溯论文来源